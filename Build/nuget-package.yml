# Repo: yourAnswer.Build
# File: nuget-package.yml

parameters:
- name: 'vmImage'
  default: 'windows-latest'
  type: string
- name: 'projects'
  default: '*.sln'
  type: string
- name: 'buildConfiguration'
  default: 'release'
  type: string
- name: 'versionMajor'
  default: '7'
  type: string
- name: 'versionMinor'
  default: '0'
  type: string
- name: 'vstsFeed'
  default: '2d453fef-16a6-4802-a154-ee007cf87da0/69b88f5e-321a-4194-af0f-848884079628'
  type: string

jobs:
- job: Build_and_deploy
  pool:
    vmImage: ${{ parameters.vmImage }}

  variables:
    buildPlatform: 'Any CPU'
    buildConfiguration: 'Release'

  steps:
  - task: NuGetToolInstaller@1
    inputs:
      versionSpec: 
      checkLatest: true

- task: NuGetCommand@2
  inputs:
    command: 'restore'
    restoreSolution: '$(solution)'
    feedsToUse: 'select'
    vstsFeed: '${{ parameters.vstsFeed }}'

- task: VSBuild@1
  inputs:
    solution: '${{ parameters.projects }}'
    platform: '$(buildPlatform)'
    configuration: '$(buildConfiguration)'
    msbuildArchitecture: 'x64'